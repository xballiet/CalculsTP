<html>
	<head>
		<link rel="shortcut icon" type="image/png" href="https://dl.dropboxusercontent.com/u/8839206/MH/ImagesMH/favicon.png" />
		<title>Calcul de portée du TéléPort</title>
		<script>
			function calculs() {
				mm = document.mh.mm.value;
				mmPBonus = document.mh.mmPBonus.value;
				vue = document.mh.vue.value;
				document.getElementById("mmBonus").innerHTML = "&nbsp;";
				document.getElementById("distance").innerHTML = "&nbsp;";
				document.getElementById("porteeH").innerHTML = "&emsp;&emsp;";
				document.getElementById("porteeV").innerHTML = "&nbsp;";
				if ( (mm != "") && (mmPBonus != "") ) {
					goFurther = true;
					if ( mmPBonus.endsWith("%") && (mmPBonus.substr(0, mmPBonus.length - 1) == parseInt(mmPBonus.substr(0, mmPBonus.length - 1))) ) {
						mmBonus = Math.floor( ( 1 + mmPBonus.substr(0, mmPBonus.length - 1) / 100 ) * mm );
					} else if (mmPBonus == parseInt(mmPBonus)) {
						mmBonus = parseInt(mm) + parseInt(mmPBonus);
					} else {
						goFurther = false;
					}
					if (goFurther) {
						document.getElementById("mmBonus").innerHTML = mmBonus;
						if (vue != "") {
							distance = Math.ceil( ( Math.sqrt( 19 + 8 * ( mmBonus / 5 + 3 ) ) - 7 ) / 2 );
							porteeH = parseInt(distance) + 20 + parseInt(vue);
							porteeV = Math.floor( distance / 3 + 3 );
							document.getElementById("distance").innerHTML = distance;
							document.getElementById("porteeH").innerHTML = porteeH;
							document.getElementById("porteeV").innerHTML = porteeV;
						}
					}
				}
			}
		</script>
	</head>
	<body background="https://dl.dropboxusercontent.com/u/8839206/MH/ImagesMH/KodiakBear.jpg" text=yellow>
		<form name=mh>
			<font>
				<table>
					<tr>
						<td>MM = <input type=text name=mm value="12480" size=3 onChange="calculs()"> + <input type=text name=mmPBonus value="76%" size=3 onChange="calculs()"> = <span id=mmBonus></span></td>
					</tr>
					<tr>
						<td>Vue (sans BM) = <input type=text name=vue value="45" size=1 onChange="calculs()"></td>
					</tr>
					<tr>
						<td>Distance = <span id=distance></span></td>
					</tr>
					<tr>
						<td>Portée horizontale = <span id=porteeH></span> et portée verticale = <span id=porteeV></span></td>
					</tr>
				</table>
			</font>
		</form>
	</body>
	<script>calculs();</script>
</html>