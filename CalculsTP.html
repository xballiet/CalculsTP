<html>
	<head>
		<link rel="shortcut icon" type="image/png" href="https://dl.dropboxusercontent.com/u/8839206/MH/ImagesMH/favicon.png" />
		<title>Calcul de portée du TéléPort</title>
		<script>
			function calculs() {
				vue = document.mh.vue.value;
				piTotaux = document.mh.piTotaux.value;
				document.getElementById("distance").innerHTML = "&nbsp;";
				document.getElementById("porteeH").innerHTML = "&emsp;&emsp;";
				document.getElementById("porteeV").innerHTML = "&nbsp;";
				if (vue != "" && vue == parseInt(vue) && piTotaux != "" && piTotaux == parseInt(piTotaux)) {
					distance = Math.ceil((Math.sqrt(19 + 8 * (piTotaux / 5 + 3)) - 7) / 2);
					porteeH = distance + 20 + vue;
					porteeV = Math.floor(distance / 3 + 3);
					document.getElementById("distance").innerHTML = distance;
					document.getElementById("porteeH").innerHTML = porteeH;
					document.getElementById("porteeV").innerHTML = porteeV;
				}

				mm = document.mh.mm.value;
				mmPBonus = document.mh.mmPBonus.value;
				document.getElementById("mmBonus").innerHTML = "&nbsp;";
				document.getElementById("aDistance").innerHTML = "&nbsp;";
				document.getElementById("aPorteeH").innerHTML = "&emsp;&emsp;";
				document.getElementById("aPorteeV").innerHTML = "&nbsp;";
				if (mm != "" && mm == parseInt(mm) && mmPBonus != "") {
					mmBonus = 0;
					if (mmPBonus.endsWith("%") && (mmPBonus.substr(0, mmPBonus.length - 1) == parseInt(mmPBonus.substr(0, mmPBonus.length - 1)))) {
						mmBonus = Math.floor((1 + mmPBonus.substr(0, mmPBonus.length - 1) / 100) * mm);
					} else if (mmPBonus == parseInt(mmPBonus)) {
						mmBonus += mm + mmPBonus;
					}
					if (vue != "" && vue == parseInt(vue) && mmBonus != "") {
						aDistance = Math.ceil((Math.sqrt(19 + 8 * (mmBonus / 5 + 3)) - 7) / 2);
						aPorteeH = aDistance + 20 + vue;
						aPorteeV = Math.floor(aDistance / 3 + 3);
						document.getElementById("mmBonus").innerHTML = mmBonus;
						document.getElementById("aDistance").innerHTML = aDistance;
						document.getElementById("aPorteeH").innerHTML = aPorteeH;
						document.getElementById("aPorteeV").innerHTML = aPorteeV;
					}
				}
			}
		</script>
	</head>
	<body background="https://dl.dropboxusercontent.com/u/8839206/MH/ImagesMH/KodiakBear.jpg" text=yellow>
		<form name=mh>
			<font>
				<table>
					<tr>
						<td>PI totaux = <input type=text name=piTotaux value="16110" size=3 onChange="calculs()"></td>
					</tr>
					<tr>
						<td>Vue (sans BM) = <input type=text name=vue value="45" size=1 onChange="calculs()"></td>
					</tr>
					<tr>
						<td>Distance = <span id=distance></span></td>
					</tr>
					<tr>
						<td>Portée horizontale = <span id=porteeH></span> et portée verticale = <span id=porteeV></span></td>
					</tr>
					<tr>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td>... Anciennement :</td>
					</tr>
					<tr>
						<td>MM = <input type=text name=mm value="12621" size=3 onChange="calculs()"> + <input type=text name=mmPBonus value="76%" size=3 onChange="calculs()"> = <span id=mmBonus></span></td>
					</tr>
					<tr>
						<td>Distance = <span id=aDistance></span></td>
					</tr>
					<tr>
						<td>Portée horizontale = <span id=aPorteeH></span> et portée verticale = <span id=aPorteeV></span></td>
					</tr>
				</table>
			</font>
		</form>
	</body>
	<script>calculs();</script>
</html>
